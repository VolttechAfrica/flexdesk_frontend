(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{11473:(e,a,s)=>{Promise.resolve().then(s.bind(s,73030))},48074:(e,a,s)=>{"use strict";s.d(a,{OV:()=>u});var t=s(95155),l=s(12115),r=s(35695),i=s(66258),n=s(51154),c=s(75525),o=s(97168),d=s(88482);function u(e){let{children:a,requiredPermissions:s=[],requiredRole:c,fallback:o,showLoading:d=!0}=e,{user:u,permissions:x,isAuthenticated:h,isLoading:p}=(0,i.A)(),v=(0,r.useRouter)();return((0,l.useEffect)(()=>{if(console.log("isLoading",p),console.log("isAuthenticated",h),!p&&!h){let e=window.location.pathname,a="/login?redirect=".concat(encodeURIComponent(e));v.replace(a)}},[h,p,v]),p&&d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):h?c&&u&&u.role!==c&&u.userType!==c?(0,t.jsx)(m,{title:"Access Denied",description:"You need ".concat(c," role to access this page."),userRole:(null==u?void 0:u.role)||(null==u?void 0:u.userType),requiredRole:c}):s.length>0&&!s.every(e=>x.includes(e))?(0,t.jsx)(m,{title:"Insufficient Permissions",description:"You don't have the required permissions to access this page.",userPermissions:x,requiredPermissions:s}):(0,t.jsx)(t.Fragment,{children:a}):null}function m(e){let{title:a,description:s,userRole:l,requiredRole:i,userPermissions:n=[],requiredPermissions:u=[]}=e,m=(0,r.useRouter)();return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,t.jsxs)(d.Zp,{className:"w-full max-w-md",children:[(0,t.jsxs)(d.aR,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:(0,t.jsx)(c.A,{className:"h-6 w-6 text-red-600"})}),(0,t.jsx)(d.ZB,{className:"text-xl text-red-600",children:a}),(0,t.jsx)(d.BT,{className:"text-gray-600",children:s})]}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[l&&i&&(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Your role:"})," ",l]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Required role:"})," ",i]})]}),u.length>0&&(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Required permissions:"}),(0,t.jsx)("div",{className:"space-y-1",children:u.map(e=>(0,t.jsxs)("div",{className:"text-sm ".concat(n.includes(e)?"text-green-600":"text-red-600"),children:[e," ",n.includes(e)?"✓":"✗"]},e))})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>m.back(),className:"flex-1",children:"Go Back"}),(0,t.jsx)(o.$,{onClick:()=>m.push("/"),className:"flex-1",children:"Home"})]})]})]})})}},50477:()=>{},68353:(e,a,s)=>{"use strict";s.d(a,{S:()=>l});var t=s(95155);function l(e){var a;let{steps:s,currentStep:l,className:r}=e;return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto ".concat(r),children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col items-center relative z-10",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200 ".concat(a<=l?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-500"),children:a+1}),(0,t.jsx)("div",{className:"mt-2 text-center",children:(0,t.jsx)("div",{className:"text-sm font-medium ".concat(a<=l?"text-blue-600":"text-gray-400"),children:e.title})})]},e.id))}),(0,t.jsx)("div",{className:"absolute top-4 left-0 right-0 h-0.5 bg-gray-200 -z-0",children:(0,t.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-out",style:{width:"".concat(l/(s.length-1)*100,"%")}})})]}),(0,t.jsx)("div",{className:"text-center mt-6",children:(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:null===(a=s[l])||void 0===a?void 0:a.description})})]})}},73030:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ed});var t=s(95155),l=s(12115),r=s(35695),i=s(66258),n=s(88145),c=s(68353),o=s(88482),d=s(97168),u=s(89852),m=s(82714),x=s(95784),h=s(99474),p=s(71007),v=s(19420),f=s(69074),g=s(4516);let b=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"},{value:"prefer-not-to-say",label:"Prefer not to say"}],j=[{value:"abia",label:"Abia"},{value:"adamawa",label:"Adamawa"},{value:"akwa-ibom",label:"Akwa Ibom"},{value:"anambra",label:"Anambra"},{value:"bauchi",label:"Bauchi"},{value:"bayelsa",label:"Bayelsa"},{value:"benue",label:"Benue"},{value:"borno",label:"Borno"},{value:"cross-river",label:"Cross River"},{value:"delta",label:"Delta"},{value:"ebonyi",label:"Ebonyi"},{value:"edo",label:"Edo"},{value:"ekiti",label:"Ekiti"},{value:"enugu",label:"Enugu"},{value:"fct",label:"Federal Capital Territory"},{value:"gombe",label:"Gombe"},{value:"imo",label:"Imo"},{value:"jigawa",label:"Jigawa"},{value:"kaduna",label:"Kaduna"},{value:"kano",label:"Kano"},{value:"katsina",label:"Katsina"},{value:"kebbi",label:"Kebbi"},{value:"kogi",label:"Kogi"},{value:"kwara",label:"Kwara"},{value:"lagos",label:"Lagos"},{value:"nasarawa",label:"Nasarawa"},{value:"niger",label:"Niger"},{value:"ogun",label:"Ogun"},{value:"ondo",label:"Ondo"},{value:"osun",label:"Osun"},{value:"oyo",label:"Oyo"},{value:"plateau",label:"Plateau"},{value:"rivers",label:"Rivers"},{value:"sokoto",label:"Sokoto"},{value:"taraba",label:"Taraba"},{value:"yobe",label:"Yobe"},{value:"zamfara",label:"Zamfara"}],N=[{value:"ssce",label:"SSCE/WAEC/NECO"},{value:"ond",label:"OND"},{value:"hnd",label:"HND"},{value:"bsc",label:"B.Sc/B.A/B.Ed"},{value:"msc",label:"M.Sc/M.A/M.Ed"},{value:"phd",label:"Ph.D"},{value:"pgde",label:"PGDE"},{value:"nce",label:"NCE"},{value:"diploma",label:"Diploma"},{value:"certificate",label:"Certificate"},{value:"other",label:"Other"}],y=[{value:"first-class",label:"First Class"},{value:"second-class-upper",label:"Second Class Upper"},{value:"second-class-lower",label:"Second Class Lower"},{value:"third-class",label:"Third Class"},{value:"pass",label:"Pass"},{value:"distinction",label:"Distinction"},{value:"upper-credit",label:"Upper Credit"},{value:"lower-credit",label:"Lower Credit"},{value:"merit",label:"Merit"},{value:"credit",label:"Credit"},{value:"a",label:"A"},{value:"b",label:"B"},{value:"c",label:"C"},{value:"d",label:"D"},{value:"e",label:"E"},{value:"f",label:"F"}],w=[{value:"spouse",label:"Spouse"},{value:"parent",label:"Parent"},{value:"sibling",label:"Sibling"},{value:"child",label:"Child"},{value:"friend",label:"Friend"},{value:"colleague",label:"Colleague"},{value:"other",label:"Other"}];var C=s(55863),k=s(53999);function P(e){let{className:a,value:s,...l}=e;return(0,t.jsx)(C.bL,{"data-slot":"progress",className:(0,k.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...l,children:(0,t.jsx)(C.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}var A=s(40646),E=s(54416),S=s(42118),B=s(29869),_=s(53580);function R(e){return e.replace(/\//g,"_")}let q={name:"dlzxebufb",apiKey:"437629583881332",apiSecret:"vuhMwxcNMN5ccNJUh9TVS2GQ2Sg",profileImageUploadPreset:"Flexdesk"};if(!q.name)throw Error("Missing NEXT_PUBLIC_CLOUDINARY_NAME environment variable");if(!q.profileImageUploadPreset)throw Error("Missing NEXT_PUBLIC_PROFILE_IMAGE_UPLOAD_PRESET environment variable");if(!q.apiSecret)throw Error("Missing NEXT_PUBLIC_CLOUDINARY_API_SECRET environment variable");s(32109);var O=s(92844);async function U(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,t="".concat(a,"_Profile_").concat(R(e));for(let e=1;e<=s;e++)try{let a={public_id:t},{data:{signature:l,timestamp:r}}=await O.uE.post("/cloudinary/signature",a),i=new FormData;i.append("signature",l),i.append("timestamp",r),i.append("api_key",q.apiKey),i.append("public_id",t),i.append("resource_type","image");let n=await fetch("https://api.cloudinary.com/v1_1/".concat(q.name,"/image/destroy"),{method:"POST",body:i}),c=await n.json();if(!n.ok){let a="error"in c&&"object"==typeof c.error&&c.error&&"message"in c.error?String(c.error.message):"Unknown error";if(console.warn("Delete attempt ".concat(e," failed: ").concat(a)),e===s)return console.warn("Failed to delete old profile image after ".concat(s," attempts: ").concat(t)),!1;await new Promise(a=>setTimeout(a,1e3*Math.pow(2,e)));continue}return console.log("Successfully deleted old profile image: ".concat(t)),!0}catch(a){if(console.warn("Delete attempt ".concat(e," error:"),a),e===s)return console.warn("Failed to delete old profile image after ".concat(s," attempts due to errors")),!1;await new Promise(a=>setTimeout(a,1e3*Math.pow(2,e)))}return!1}let F=async function(e){let{file:a,userId:s,schoolId:t}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{allowedMimeTypes:r=["image/png","image/jpeg","image/webp"],maxSizeMB:i=5,timeoutMs:n=3e4,deleteRetries:c=2}=l;if(!(null==s?void 0:s.trim()))throw Error("User ID is required and cannot be empty");if(!(null==t?void 0:t.trim()))throw Error("School ID is required and cannot be empty");!function(e,a){let{allowedMimeTypes:s,maxSizeMB:t}=a;if(!e)throw Error("No file provided");if(!s.includes(e.type))throw Error("Unsupported file type: ".concat(e.type||"unknown",". Allowed types: ").concat(s.join(", ")));if(e.size>1048576*t)throw Error("File too large. Maximum size allowed: ".concat(t,"MB"));if(0===e.size)throw Error("File is empty")}(a,{allowedMimeTypes:r,maxSizeMB:i});try{await U(s,t,c)}catch(e){console.warn("Profile image deletion failed, proceeding with upload:",e)}"".concat(t,"_Profile_").concat(R(s));let o=new FormData;o.append("file",a),o.append("upload_preset",q.profileImageUploadPreset),o.append("public_id","".concat(t,"_Profile_").concat(R(s))),o.append("resource_type","image");let d=new AbortController,u=setTimeout(()=>d.abort(),n);try{let e=await fetch("https://api.cloudinary.com/v1_1/".concat(q.name,"/image/upload"),{method:"POST",body:o,signal:d.signal});if(!e.ok){var m;let a=await e.json(),s=(null==a?void 0:null===(m=a.error)||void 0===m?void 0:m.message)||"Upload failed with status ".concat(e.status);throw Error(s)}let a=await e.json();if(!(null==a?void 0:a.secure_url))throw Error("Upload successful but no secure URL returned");return console.log("Profile image uploaded successfully: ".concat(a.public_id)),a.secure_url}catch(e){if(e instanceof Error){if("AbortError"===e.name)throw Error("Upload timed out. Please try again.");throw e}throw Error("Failed to upload profile image")}finally{clearTimeout(u)}};function T(e){let{value:a,onChange:s,onError:r,userId:i,schoolId:n}=e,[c,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(0),[h,p]=(0,l.useState)(!1),v=(0,l.useRef)(null),f=e=>["image/jpeg","image/jpg","image/png"].includes(e.type)?e.size>5242880?"File size must be less than 5MB":null:"Please upload a JPEG or PNG image file",g=async e=>{let a=f(e);if(a){(0,_.oR)({title:"Invalid File",description:a,variant:"destructive"}),null==r||r(a);return}u(!0),x(0);try{let a=await F({file:e,userId:i,schoolId:n});if(a)s(a),(0,_.oR)({title:"Upload Successful",description:"Your passport photo has been uploaded successfully."});else throw Error("Upload failed")}catch(a){console.error("Upload error:",a);let e="Failed to upload passport photo. Please try again.";(0,_.oR)({title:"Upload Failed",description:e,variant:"destructive"}),null==r||r(e)}finally{u(!1),x(0)}},b=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?p(!0):"dragleave"===e.type&&p(!1)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{ref:v,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files[0])},className:"hidden"}),a?(0,t.jsx)(o.Zp,{children:(0,t.jsx)(o.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:a||"/placeholder.svg",alt:"Passport",className:"w-16 h-16 object-cover rounded-lg border"}),(0,t.jsx)(A.A,{className:"absolute -top-2 -right-2 h-5 w-5 text-green-500 bg-white rounded-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:"Passport Photo"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Upload successful"})]})]}),(0,t.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>{s(""),v.current&&(v.current.value=""),U(i,n)},disabled:c,children:(0,t.jsx)(E.A,{className:"h-4 w-4"})})]})})}):(0,t.jsx)(o.Zp,{className:"border-2 border-dashed transition-colors ".concat(h?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},children:(0,t.jsxs)(o.Wu,{className:"p-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(S.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Passport Photo"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Drag and drop your passport photo here, or click to browse"}),(0,t.jsxs)(d.$,{onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},disabled:c,className:"mb-2",children:[(0,t.jsx)(B.A,{className:"h-4 w-4 mr-2"}),c?"Uploading...":"Choose File"]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"JPEG or PNG, max 5MB"})]}),c&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(P,{value:m,className:"w-full"}),(0,t.jsxs)("p",{className:"text-sm text-center text-gray-500 mt-2",children:["Uploading... ",m,"%"]})]})]})})]})}function D(e){let{data:a,onUpdate:s,onNext:r,onBack:n}=e,[c,N]=(0,l.useState)({}),{user:y}=(0,i.A)(),w=(e,t)=>{s({...a,[e]:t}),c[e]&&N({...c,[e]:""})},C=()=>{let e={};return a.phoneNumber||(e.phoneNumber="Phone number is required"),a.dateOfBirth||(e.dateOfBirth="Date of birth is required"),a.gender||(e.gender="Gender is required"),a.address||(e.address="Address is required"),a.state||(e.state="State is required"),a.city||(e.city="City is required"),a.profilePicture||(e.profilePicture="A clear passport photo is required"),a.phoneNumber&&!/^(\+234|0)[789][01]\d{8}$/.test(a.phoneNumber)&&(e.phoneNumber="Please enter a valid Nigerian phone number"),N(e),0===Object.keys(e).length};return(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 text-blue-600"}),"Personal Information"]}),(0,t.jsx)(o.BT,{children:"Please provide your basic personal details and contact information"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Passport Photo"}),(0,t.jsx)(T,{value:a.profilePicture||"",onChange:e=>w("profilePicture",e),onError:e=>N({...c,profilePicture:e}),userId:(null==y?void 0:y.id)||"",schoolId:(null==y?void 0:y.school.id)||""}),c.profilePicture&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.profilePicture})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"phone",children:"Phone Number *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(u.p,{id:"phone",placeholder:"+234 or 0801234567",value:a.phoneNumber||"",onChange:e=>w("phoneNumber",e.target.value),className:"pl-10 ".concat(c.phoneNumber?"border-red-500":"")})]}),c.phoneNumber&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.phoneNumber})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"dob",children:"Date of Birth *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(u.p,{id:"dob",type:"date",value:a.dateOfBirth||"",onChange:e=>w("dateOfBirth",e.target.value),className:"pl-10 ".concat(c.dateOfBirth?"border-red-500":"")})]}),c.dateOfBirth&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.dateOfBirth})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"gender",children:"Gender *"}),(0,t.jsxs)(x.l6,{value:a.gender||"",onValueChange:e=>w("gender",e),children:[(0,t.jsx)(x.bq,{className:c.gender?"border-red-500":"",children:(0,t.jsx)(x.yv,{placeholder:"Select your gender"})}),(0,t.jsx)(x.gC,{children:b.map(e=>(0,t.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]}),c.gender&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.gender})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"address",children:"Address *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(h.T,{id:"address",placeholder:"Enter your full address",value:a.address||"",onChange:e=>w("address",e.target.value),className:"pl-10 min-h-[80px] ".concat(c.address?"border-red-500":"")})]}),c.address&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.address})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"state",children:"State *"}),(0,t.jsxs)(x.l6,{value:a.state||"",onValueChange:e=>w("state",e),children:[(0,t.jsx)(x.bq,{className:c.state?"border-red-500":"",children:(0,t.jsx)(x.yv,{placeholder:"Select state"})}),(0,t.jsx)(x.gC,{children:j.map(e=>(0,t.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]}),c.state&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.state})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"city",children:"City *"}),(0,t.jsx)(u.p,{id:"city",placeholder:"Enter your city",value:a.city||"",onChange:e=>w("city",e.target.value),className:c.city?"border-red-500":""}),c.city&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:c.city})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"lga",children:"LGA"}),(0,t.jsx)(u.p,{id:"lga",placeholder:"Local Government Area",value:a.lga||"",onChange:e=>w("lga",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6",children:[n&&(0,t.jsx)(d.$,{variant:"outline",onClick:n,children:"Back"}),(0,t.jsx)(d.$,{onClick:()=>{C()&&r()},className:"ml-auto",children:"Next Step"})]})]})]})}var z=s(87949),I=s(62525),Z=s(84616);function J(e){let{data:a,onUpdate:s,onNext:r,onBack:i}=e,[n,c]=(0,l.useState)({}),h=()=>{s([...a,{qualification:"",institution:"",course:"",grade:"",yearObtained:""}])},p=e=>{s(a.filter((a,s)=>s!==e))},v=(e,t,l)=>{s(a.map((a,s)=>s===e?{...a,[t]:l}:a))},f=()=>{let e={};return 0===a.length?e.qualifications="At least one qualification is required":a.forEach((a,s)=>{a.qualification||(e["qualification_".concat(s)]="Qualification type is required"),a.institution||(e["institution_".concat(s)]="Institution is required"),a.course||(e["course_".concat(s)]="Course/Program is required")}),c(e),0===Object.keys(e).length};return 0===a.length&&h(),(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(z.A,{className:"h-5 w-5 text-blue-600"}),"Professional Details"]}),(0,t.jsx)(o.BT,{children:"Add your educational qualifications and professional certifications"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-6",children:[n.qualifications&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:n.qualifications}),a.map((e,s)=>(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsx)(o.aR,{className:"pb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(o.ZB,{className:"text-lg",children:["Qualification ",s+1]}),a.length>1&&(0,t.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>p(s),className:"text-red-500 hover:text-red-700",children:(0,t.jsx)(I.A,{className:"h-4 w-4"})})]})}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Qualification Type *"}),(0,t.jsxs)(x.l6,{value:e.qualification,onValueChange:e=>v(s,"qualification",e),children:[(0,t.jsx)(x.bq,{className:n["qualification_".concat(s)]?"border-red-500":"",children:(0,t.jsx)(x.yv,{placeholder:"Select qualification"})}),(0,t.jsx)(x.gC,{children:N.map(e=>(0,t.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]}),n["qualification_".concat(s)]&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:n["qualification_".concat(s)]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Institution *"}),(0,t.jsx)(u.p,{placeholder:"University/Institution name",value:e.institution,onChange:e=>v(s,"institution",e.target.value),className:n["institution_".concat(s)]?"border-red-500":""}),n["institution_".concat(s)]&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:n["institution_".concat(s)]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Course/Program *"}),(0,t.jsx)(u.p,{placeholder:"e.g., Computer Science, Mathematics Education",value:e.course,onChange:e=>v(s,"course",e.target.value),className:n["course_".concat(s)]?"border-red-500":""}),n["course_".concat(s)]&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:n["course_".concat(s)]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Grade/Class"}),(0,t.jsxs)(x.l6,{value:e.grade||"",onValueChange:e=>v(s,"grade",e),children:[(0,t.jsx)(x.bq,{children:(0,t.jsx)(x.yv,{placeholder:"Select grade"})}),(0,t.jsx)(x.gC,{children:y.map(e=>(0,t.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Year Obtained"}),(0,t.jsx)(u.p,{type:"number",placeholder:"e.g., 2020",min:"1950",max:new Date().getFullYear(),value:e.yearObtained||"",onChange:e=>v(s,"yearObtained",e.target.value)})]})]})]})]},s)),(0,t.jsxs)(d.$,{variant:"outline",onClick:h,className:"w-full border-dashed bg-transparent",children:[(0,t.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Add Another Qualification"]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,t.jsx)(d.$,{variant:"outline",onClick:i,children:"Back"}),(0,t.jsx)(d.$,{onClick:()=>{f()&&r()},children:"Next Step"})]})]})]})}var M=s(59654);function L(e){let{className:a,...s}=e;return(0,t.jsx)(M.bL,{"data-slot":"switch",className:(0,k.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,t.jsx)(M.zi,{"data-slot":"switch-thumb",className:(0,k.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var $=s(75525),W=s(23861);function G(e){var a,s,r,i,n,c,h,p,f;let{data:g,onUpdate:b,onNext:j,onBack:N}=e,[y,C]=(0,l.useState)({}),k=(e,a)=>{b({...g,emergencyContact:{...g.emergencyContact,[e]:a}})},P=(e,a)=>{b({...g,notifications:{...g.notifications,[e]:a}})},A=()=>{var e,a,s;let t={};return(null===(e=g.emergencyContact)||void 0===e?void 0:e.name)&&!(null===(a=g.emergencyContact)||void 0===a?void 0:a.phoneNumber)&&(t.emergencyPhone="Emergency contact phone number is required"),(null===(s=g.emergencyContact)||void 0===s?void 0:s.phoneNumber)&&!/^(\+234|0)[789][01]\d{8}$/.test(g.emergencyContact.phoneNumber)&&(t.emergencyPhone="Please enter a valid Nigerian phone number"),C(t),0===Object.keys(t).length};return(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-5 w-5 text-blue-600"}),"Additional Information"]}),(0,t.jsx)(o.BT,{children:"Emergency contact details and notification preferences"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-6",children:[(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsxs)(o.aR,{className:"pb-4",children:[(0,t.jsxs)(o.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),"Emergency Contact"]}),(0,t.jsx)(o.BT,{children:"Someone we can contact in case of emergency (optional)"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Full Name"}),(0,t.jsx)(u.p,{placeholder:"Emergency contact name",value:(null===(a=g.emergencyContact)||void 0===a?void 0:a.name)||"",onChange:e=>k("name",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Relationship"}),(0,t.jsxs)(x.l6,{value:(null===(s=g.emergencyContact)||void 0===s?void 0:s.relationship)||"",onValueChange:e=>k("relationship",e),children:[(0,t.jsx)(x.bq,{children:(0,t.jsx)(x.yv,{placeholder:"Select relationship"})}),(0,t.jsx)(x.gC,{children:w.map(e=>(0,t.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Phone Number"}),(0,t.jsx)(u.p,{placeholder:"+234 or 0801234567",value:(null===(r=g.emergencyContact)||void 0===r?void 0:r.phoneNumber)||"",onChange:e=>k("phoneNumber",e.target.value),className:y.emergencyPhone?"border-red-500":""}),y.emergencyPhone&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:y.emergencyPhone})]})]})]})]}),(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsxs)(o.aR,{className:"pb-4",children:[(0,t.jsxs)(o.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(W.A,{className:"h-4 w-4"}),"Notification Preferences"]}),(0,t.jsx)(o.BT,{children:"Choose how you'd like to receive notifications"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(m.J,{children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive updates and announcements via email"})]}),(0,t.jsx)(L,{checked:null===(h=null===(i=g.notifications)||void 0===i?void 0:i.email)||void 0===h||h,onCheckedChange:e=>P("email",e)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(m.J,{children:"SMS Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive important alerts via SMS"})]}),(0,t.jsx)(L,{checked:null!==(p=null===(n=g.notifications)||void 0===n?void 0:n.sms)&&void 0!==p&&p,onCheckedChange:e=>P("sms",e)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(m.J,{children:"Push Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive real-time notifications in your browser"})]}),(0,t.jsx)(L,{checked:null===(f=null===(c=g.notifications)||void 0===c?void 0:c.push)||void 0===f||f,onCheckedChange:e=>P("push",e)})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,t.jsx)(d.$,{variant:"outline",onClick:N,children:"Back"}),(0,t.jsx)(d.$,{onClick:()=>{A()&&j()},children:"Review & Submit"})]})]})]})}var V=s(87489);function Y(e){let{className:a,orientation:s="horizontal",decorative:l=!0,...r}=e;return(0,t.jsx)(V.b,{"data-slot":"separator",decorative:l,orientation:s,className:(0,k.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...r})}var K=s(51154);function Q(e){var a,s,r,i;let{data:c,onSubmit:u,onBack:m}=e,[x,h]=(0,l.useState)(!1),v=async()=>{h(!0);try{await u()}finally{h(!1)}},f=(e,a)=>{var s;return(null===(s=a.find(a=>a.value===e))||void 0===s?void 0:s.label)||e};return(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-5 w-5 text-green-600"}),"Review & Submit"]}),(0,t.jsx)(o.BT,{children:"Please review your information before submitting"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-6",children:[(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsx)(o.aR,{className:"pb-4",children:(0,t.jsxs)(o.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),"Personal Information"]})}),(0,t.jsxs)(o.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),(0,t.jsx)("p",{className:"text-sm",children:c.profile.phoneNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),(0,t.jsx)("p",{className:"text-sm",children:c.profile.dateOfBirth})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Gender"}),(0,t.jsx)("p",{className:"text-sm",children:f(c.profile.gender||"",b)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"State"}),(0,t.jsx)("p",{className:"text-sm",children:f(c.profile.state||"",j)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,t.jsx)("p",{className:"text-sm",children:c.profile.address})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"City"}),(0,t.jsx)("p",{className:"text-sm",children:c.profile.city})]}),c.profile.lga&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"LGA"}),(0,t.jsx)("p",{className:"text-sm",children:c.profile.lga})]})]})]})]}),(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsx)(o.aR,{className:"pb-4",children:(0,t.jsxs)(o.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(z.A,{className:"h-4 w-4"}),"Professional Details"]})}),(0,t.jsx)(o.Wu,{className:"space-y-4",children:c.qualifications.map((e,a)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h4",{className:"font-medium",children:["Qualification ",a+1]}),(0,t.jsx)(n.E,{variant:"secondary",children:f(e.qualification,N)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Institution"}),(0,t.jsx)("p",{children:e.institution})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Course"}),(0,t.jsx)("p",{children:e.course})]}),e.grade&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Grade"}),(0,t.jsx)("p",{children:f(e.grade,y)})]}),e.yearObtained&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Year Obtained"}),(0,t.jsx)("p",{children:e.yearObtained})]})]})]},a))})]}),(0,t.jsxs)(o.Zp,{className:"border-gray-200",children:[(0,t.jsx)(o.aR,{className:"pb-4",children:(0,t.jsxs)(o.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),"Additional Information"]})}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(null===(a=c.emergencyContact)||void 0===a?void 0:a.name)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Emergency Contact"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Name"}),(0,t.jsx)("p",{children:c.emergencyContact.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Relationship"}),(0,t.jsx)("p",{children:f(c.emergencyContact.relationship,w)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Phone"}),(0,t.jsx)("p",{children:c.emergencyContact.phoneNumber})]})]})]}),(0,t.jsx)(Y,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Notification Preferences"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(null===(s=c.notifications)||void 0===s?void 0:s.email)&&(0,t.jsx)(n.E,{variant:"outline",children:"Email"}),(null===(r=c.notifications)||void 0===r?void 0:r.sms)&&(0,t.jsx)(n.E,{variant:"outline",children:"SMS"}),(null===(i=c.notifications)||void 0===i?void 0:i.push)&&(0,t.jsx)(n.E,{variant:"outline",children:"Push"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,t.jsx)(d.$,{variant:"outline",onClick:m,disabled:x,children:"Back"}),(0,t.jsx)(d.$,{onClick:v,disabled:x,children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Complete Setup"})]})]})]})}var X=s(48074),H=s(59964);let ee=[{id:"personal",title:"Personal Information",description:"Basic personal details and contact information",isCompleted:!1,isActive:!0},{id:"professional",title:"Professional Details",description:"Educational qualifications and experience",isCompleted:!1,isActive:!1},{id:"additional",title:"Additional Information",description:"Emergency contacts and preferences",isCompleted:!1,isActive:!1},{id:"review",title:"Review & Submit",description:"Review your information and complete setup",isCompleted:!1,isActive:!1}];var ea=s(381),es=s(34835),et=s(85977);function el(e){let{className:a,...s}=e;return(0,t.jsx)(et.bL,{"data-slot":"avatar",className:(0,k.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...s})}function er(e){let{className:a,...s}=e;return(0,t.jsx)(et._V,{"data-slot":"avatar-image",className:(0,k.cn)("aspect-square size-full",a),...s})}function ei(e){let{className:a,...s}=e;return(0,t.jsx)(et.H4,{"data-slot":"avatar-fallback",className:(0,k.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...s})}function en(e){var a,s;let{user:l,logout:r}=e;return(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(el,{className:"h-10 w-10",children:[(0,t.jsx)(er,{src:(null==l?void 0:null===(a=l.profile)||void 0===a?void 0:a.profilePicture)||"/images/avatar.jpeg",alt:"".concat(null==l?void 0:l.firstName," ").concat(null==l?void 0:l.lastName)}),(0,t.jsx)(ei,{className:"bg-blue-100 text-blue-600 font-semibold text-sm",children:(null==l?void 0:l.firstName)&&(null==l?void 0:l.lastName)?"".concat(l.firstName.charAt(0)).concat(l.lastName.charAt(0)).toUpperCase():(null==l?void 0:null===(s=l.email)||void 0===s?void 0:s.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h5",{className:"text-sm font-semibold text-gray-700",children:[null==l?void 0:l.firstName," ",null==l?void 0:l.lastName]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(()=>{switch(null==l?void 0:l.roleId){case"801":return"Administrator";case"800":return"Principal";case"802":return"Super Administrator";case"803":return"Teacher";case"805":return"Parent";default:return"Staff Member"}})()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(d.$,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Settings"]}),(0,t.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(es.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})})}var ec=s(49226);function eo(){return(0,t.jsx)("footer",{className:"bg-gray-50 border-t border-gray-200 py-6",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,t.jsx)("p",{children:"Need help? Contact support or check our documentation."})})})})}function ed(){var e,a,s,o,d,u,m,x;let[h,v]=(0,l.useState)(0),[f,g]=(0,l.useState)(()=>ee),{user:b,logout:j}=(0,i.A)(),N=(0,r.useRouter)(),y=(0,l.useMemo)(()=>f.map(e=>{var a;return{...e,isValid:null===(a=e.isValid)||void 0===a||a}}),[f]),[w,C]=(0,l.useState)({profile:{profilePicture:(null==b?void 0:null===(e=b.profile)||void 0===e?void 0:e.profilePicture)||"",dateOfBirth:(null==b?void 0:null===(a=b.profile)||void 0===a?void 0:a.dateOfBirth)||"",gender:(null==b?void 0:null===(s=b.profile)||void 0===s?void 0:s.gender)||"",phoneNumber:(null==b?void 0:null===(o=b.profile)||void 0===o?void 0:o.phoneNumber)||"",address:(null==b?void 0:null===(d=b.profile)||void 0===d?void 0:d.address)||"",state:(null==b?void 0:null===(u=b.profile)||void 0===u?void 0:u.state)||"",city:(null==b?void 0:null===(m=b.profile)||void 0===m?void 0:m.city)||"",lga:(null==b?void 0:null===(x=b.profile)||void 0===x?void 0:x.lga)||""},qualifications:[],emergencyContact:{name:"",relationship:"",phoneNumber:""},notifications:{email:!0,sms:!1,push:!0}});(0,l.useMemo)(()=>[p.A,z.A,$.A,A.A],[]);let k=(0,l.useCallback)(e=>{C(a=>({...a,profile:e}))},[]),P=(0,l.useCallback)(e=>{C(a=>({...a,qualifications:e}))},[]),E=(0,l.useCallback)(e=>{C(a=>({...a,...e}))},[]),S=(0,l.useCallback)(()=>{if(h<f.length-1){let e=[...f];e[h].isCompleted=!0,e[h].isActive=!1,e[h+1].isActive=!0,g(e),v(e=>e+1)}},[h,f]),B=(0,l.useCallback)(()=>{if(h>0){let e=[...f];e[h].isActive=!1,e[h-1].isActive=!0,g(e),v(e=>e-1)}},[h,f]),R=(0,l.useCallback)(async()=>{try{if(!await O.uE.post("/user/onboarding",w))throw Error("Failed to submit staff onboarding data");N.replace(ec.s[null==b?void 0:b.roleId]),(0,_.oR)({title:"Profile Setup Complete!",description:"Welcome to the platform. You can now access all features."})}catch(e){console.error("Onboarding submission failed:",e),(0,_.oR)({title:"Setup Failed",description:"There was an error completing your profile. Please try again.",variant:"destructive"})}},[w,N,b]),q=(0,l.useMemo)(()=>{switch(h){case 0:return(0,t.jsx)(D,{data:w.profile,onUpdate:k,onNext:S});case 1:return(0,t.jsx)(J,{data:w.qualifications,onUpdate:P,onNext:S,onBack:B});case 2:return(0,t.jsx)(G,{data:{emergencyContact:w.emergencyContact,notifications:w.notifications},onUpdate:E,onNext:S,onBack:B});case 3:return(0,t.jsx)(Q,{data:w,onSubmit:R,onBack:B});default:return null}},[h,w,k,P,E,S,B,R]);return(0,t.jsx)(X.OV,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)(en,{user:b,logout:j}),(0,t.jsx)("section",{className:"py-12 bg-gradient-to-br from-blue-50 to-purple-50",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,t.jsxs)(n.E,{variant:"secondary",className:"mb-4",children:[(0,t.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Welcome, ",null==b?void 0:b.firstName,"!"]}),(0,t.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Complete Your Profile Setup"}),(0,t.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Help us personalize your experience by completing your staff profile. This will only take a few minutes."}),(0,t.jsx)(c.S,{steps:y,currentStep:h})]})})}),(0,t.jsx)("section",{className:"py-12",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:q})})}),(0,t.jsx)(eo,{})]})})}},82714:(e,a,s)=>{"use strict";s.d(a,{J:()=>o});var t=s(95155),l=s(12115),r=s(24265),i=s(74466),n=s(53999);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.b,{ref:a,className:(0,n.cn)(c(),s),...l})});o.displayName=r.b.displayName},88145:(e,a,s)=>{"use strict";s.d(a,{E:()=>c});var t=s(95155);s(12115);var l=s(99708),r=s(74466),i=s(53999);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:a,variant:s,asChild:r=!1,...c}=e,o=r?l.DX:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(n({variant:s}),a),...c})}},88482:(e,a,s)=>{"use strict";s.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>r,aR:()=>i});var t=s(95155);s(12115);var l=s(53999);function r(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",a),...s})}function o(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",a),...s})}},89852:(e,a,s)=>{"use strict";s.d(a,{p:()=>r});var t=s(95155);s(12115);var l=s(53999);function r(e){let{className:a,type:s,...r}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-11 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...r})}},95784:(e,a,s)=>{"use strict";s.d(a,{bq:()=>m,eb:()=>v,gC:()=>p,l6:()=>d,yv:()=>u});var t=s(95155),l=s(12115),r=s(57031),i=s(66474),n=s(47863),c=s(5196),o=s(53999);let d=r.bL;r.YJ;let u=r.WT,m=l.forwardRef((e,a)=>{let{className:s,children:l,...n}=e;return(0,t.jsxs)(r.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[l,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let h=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let p=l.forwardRef((e,a)=>{let{className:s,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,t.jsx)(x,{}),(0,t.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(h,{})]})})});p.displayName=r.UC.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=r.JU.displayName;let v=l.forwardRef((e,a)=>{let{className:s,children:l,...i}=e;return(0,t.jsxs)(r.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(r.p4,{children:l})]})});v.displayName=r.q7.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=r.wv.displayName},97168:(e,a,s)=>{"use strict";s.d(a,{$:()=>c});var t=s(95155);s(12115);var l=s(99708),r=s(74466),i=s(53999);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-12 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:a,variant:s,size:r,asChild:c=!1,...o}=e,d=c?l.DX:"button";return(0,t.jsx)(d,{"data-slot":"button",className:(0,i.cn)(n({variant:s,size:r,className:a})),...o})}},99474:(e,a,s)=>{"use strict";s.d(a,{T:()=>r});var t=s(95155);s(12115);var l=s(53999);function r(e){let{className:a,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}}},e=>{var a=a=>e(e.s=a);e.O(0,[455,878,464,470,443,844,780,441,684,358],()=>a(11473)),_N_E=e.O()}]);